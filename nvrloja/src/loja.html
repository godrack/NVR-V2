<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nova Vibe RP - Loja</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#0c0c0c;--surface:#1a1a1a;--glass:rgba(255,255,255,0.05);--neon:#00ff88;--neon-glow:rgba(0,255,136,0.3);--purple:#8b5cf6;--text:#fff;--text-dim:#a0a0a0;--danger:#ff4757;--success:#2ed573;--warning:#ffa502}
    body{background:var(--bg);color:var(--text);font-family:system-ui,sans-serif;line-height:1.6;min-height:100vh}
    .container{max-width:1200px;margin:0 auto;padding:20px}
    .header{background:linear-gradient(135deg,var(--surface),rgba(139,92,246,0.1));border-radius:20px;padding:40px 20px;text-align:center;margin-bottom:40px;border:1px solid var(--glass);backdrop-filter:blur(20px)}
    .header h1{font-size:3rem;background:linear-gradient(135deg,var(--neon),var(--purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}
    .header p{color:var(--text-dim);font-size:1.2rem}
    .filters{display:flex;gap:15px;justify-content:center;margin-bottom:40px;flex-wrap:wrap}
    .filter-btn{padding:12px 24px;border:2px solid var(--glass);background:transparent;color:var(--text);border-radius:25px;cursor:pointer;transition:all 0.3s;font-weight:600}
    .filter-btn:hover,.filter-btn.active{background:linear-gradient(135deg,var(--neon),var(--purple));border-color:var(--neon);transform:translateY(-2px);box-shadow:0 5px 15px var(--neon-glow)}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:25px;margin-bottom:40px}
    .product-item{background:var(--surface);border:1px solid var(--glass);border-radius:20px;padding:20px;transition:all 0.3s;backdrop-filter:blur(10px);position:relative;overflow:hidden}
    .product-item::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent,rgba(0,255,136,0.05),transparent);opacity:0;transition:opacity 0.3s}
    .product-item:hover{transform:translateY(-10px);border-color:var(--neon);box-shadow:0 10px 30px rgba(0,255,136,0.1)}
    .product-item:hover::before{opacity:1}
    .product-item img{width:100%;height:200px;object-fit:cover;border-radius:15px;margin-bottom:15px;transition:transform 0.3s}
    .product-item:hover img{transform:scale(1.05)}
    .product-item h3{color:var(--neon);margin-bottom:10px;font-size:1.3rem}
    .product-item p{color:var(--text-dim);margin-bottom:15px;font-size:0.95rem}
    .product-item .price{font-size:1.4rem;font-weight:800;color:var(--neon);margin-bottom:15px;text-shadow:0 0 10px var(--neon-glow)}
    .product-item button{width:100%;padding:12px;background:linear-gradient(135deg,var(--neon),var(--purple));border:none;border-radius:10px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s;font-size:1rem}
    .product-item button:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,255,136,0.3)}
    .cart{position:fixed;top:20px;right:20px;background:var(--surface);border:1px solid var(--glass);border-radius:15px;padding:15px;backdrop-filter:blur(20px);z-index:1000;min-width:200px}
    .cart h3{color:var(--neon);margin-bottom:10px;font-size:1.1rem}
    .cart-items{max-height:200px;overflow-y:auto;margin-bottom:10px}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-bottom:1px solid var(--glass);font-size:0.9rem}
    .cart-item:last-child{border-bottom:none}
    .cart-total{font-weight:800;color:var(--neon);font-size:1.1rem;margin-bottom:10px}
    .cart button{width:100%;padding:10px;background:linear-gradient(135deg,var(--success),var(--neon));border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s}
    .cart button:hover{transform:translateY(-2px)}
    .empty-cart{color:var(--text-dim);font-size:0.9rem;text-align:center;padding:20px}
    .sync-status{position:fixed;bottom:20px;right:20px;background:var(--surface);border:1px solid var(--glass);border-radius:10px;padding:10px 15px;backdrop-filter:blur(20px);z-index:1000;font-size:0.9rem;opacity:0;transition:opacity 0.3s}
    .sync-status.show{opacity:1}
    .sync-status.success{border-color:var(--success);color:var(--success)}
    .sync-status.warning{border-color:var(--warning);color:var(--warning)}
    .loading{text-align:center;padding:40px;color:var(--text-dim)}
    .loading::after{content:'';display:inline-block;width:20px;height:20px;border:2px solid var(--neon);border-top:2px solid transparent;border-radius:50%;animation:spin 1s linear infinite;margin-left:10px}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    .no-products{text-align:center;padding:60px 20px;color:var(--text-dim)}
    .no-products h3{color:var(--neon);margin-bottom:10px;font-size:1.5rem}
    @media (max-width:768px){
      .container{padding:10px}
      .header{padding:20px 15px}
      .header h1{font-size:2rem}
      .filters{gap:10px}
      .filter-btn{padding:10px 20px;font-size:0.9rem}
      .products-grid{grid-template-columns:1fr;gap:20px}
      .cart{position:relative;top:auto;right:auto;margin-bottom:20px}
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>üéÆ Nova Vibe RP</h1>
    <p>Sua loja de itens premium para GTA V Roleplay</p>
  </div>

  <div class="filters">
    <button class="filter-btn active" onclick="filterProducts('all')">üåü Todos</button>
    <button class="filter-btn" onclick="filterProducts('casas')">üè† Casas</button>
    <button class="filter-btn" onclick="filterProducts('veiculos')">üöó Ve√≠culos</button>
    <button class="filter-btn" onclick="filterProducts('extras')">‚≠ê Extras</button>
  </div>

  <div id="products-container">
    <div class="loading">Carregando produtos...</div>
  </div>
</div>

<div class="cart">
  <h3>üõí Carrinho</h3>
  <div id="cart-items" class="cart-items"></div>
  <div id="cart-total" class="cart-total">Total: R$ 0,00</div>
  <button onclick="checkout()">Finalizar Compra</button>
</div>

<div id="sync-status" class="sync-status"></div>

<script>
let products = [];
let cart = [];
let currentFilter = 'all';

// Produtos padr√£o (fallback caso n√£o haja dados no localStorage)
const defaultProducts = [
  {id:1,name:'Mans√£o Vista Mar',description:'Luxo √† beira-mar com garagem p/ 5 carros.',price:259,category:'casas',image:'https://five-rp.de/wp-content/uploads/2024/07/chrome_nQisegy55l-1024x573.jpg.webp'},
  {id:2,name:'Lamborghini Urus',description:'V12 Biturbo, o mais veloz da cidade.',price:149,category:'veiculos',image:'https://img.gta5-mods.com/q95/images/lamborghini-urus-2018-add-on/2b9a2a-PGTA51544780450.jpg'},
  {id:3,name:'VIP Ouro (30d)',description:'Acesso VIP com benef√≠cios exclusivos.',price:99,category:'extras',image:'https://storage.hydrus.gg/production/packages/mwUds4zV929tBziSfiAs5gG64TqNnwOlcjCXZsKIqVPsixKUiR1DXeGtOUjmGPfq.png'},
  {id:4,name:'Apartamento Moderno',description:'Localiza√ß√£o central com vista panor√¢mica.',price:180,category:'casas',image:'https://img.gta5-mods.com/q95/images/single-player-mode-custom-apartment-menyoo-mapeditor-adco1234/6f0395-9e73e5-46f5ac-GTA5%202016-05-02%2012-17-12-54_%E5%89%AF%E6%9C%AC.png'},
  {id:5,name:'Moto Esportiva R1',description:'Velocidade e agilidade nas ruas.',price:85,category:'veiculos',image:'https://img.gta5-mods.com/q95/images/2020-yamaha-yzf-r1-r1m/b82192-a.jpg'},
  {id:6,name:'VIP Permanente',description:'M√°ximo de privil√©gios no servidor.',price:1390,category:'extras',image:'https://storage.hydrus.gg/production/packages/yKxKYS3wtu4Xz1Y6N2ui9TM0oTUpYOKTrLx7bTSqW8BREpXUWLp5wojEkwMRBkgc.png'},
  {id:7,name:'GTA V PREMIUM EDITION',description:'M√°ximo de privil√©gios no servidor.',price:178,category:'extras',image:'https://s2-techtudo.glbimg.com/Dx-d7zd6abaVIdY1QqGVKl_QvJ4=/0x0:620x349/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_08fbf48bc0524877943fe86e43087e7a/internal_photos/bs/2021/s/i/R6L1HDR3GxheHSo2ECLQ/2013-10-11-grand-theft-auto-5-gta-finais.jpg'}
];

// Fun√ß√£o para carregar produtos do localStorage ou usar padr√£o
function loadProducts() {
  try {
    const savedProducts = localStorage.getItem('nova_vibe_products');
    if (savedProducts) {
      products = JSON.parse(savedProducts);
      showSyncStatus('Produtos sincronizados com sucesso!', 'success');
    } else {
      products = defaultProducts;
      showSyncStatus('Usando produtos padr√£o', 'warning');
    }
  } catch (error) {
    console.error('Erro ao carregar produtos:', error);
    products = defaultProducts;
    showSyncStatus('Erro na sincroniza√ß√£o - usando padr√£o', 'warning');
  }
  
  renderProducts();
}

// Fun√ß√£o para mostrar status de sincroniza√ß√£o
function showSyncStatus(message, type) {
  const statusEl = document.getElementById('sync-status');
  statusEl.textContent = message;
  statusEl.className = `sync-status show ${type}`;
  
  setTimeout(() => {
    statusEl.classList.remove('show');
  }, 3000);
}

// Fun√ß√£o para renderizar produtos
function renderProducts() {
  const container = document.getElementById('products-container');
  
  if (products.length === 0) {
    container.innerHTML = `
      <div class="no-products">
        <h3>üõçÔ∏è Nenhum produto encontrado</h3>
        <p>Aguarde o administrador adicionar produtos √† loja</p>
      </div>
    `;
    return;
  }

  const filteredProducts = currentFilter === 'all' 
    ? products 
    : products.filter(p => p.category === currentFilter);

  if (filteredProducts.length === 0) {
    container.innerHTML = `
      <div class="no-products">
        <h3>üîç Nenhum produto nesta categoria</h3>
        <p>Tente filtrar por uma categoria diferente</p>
      </div>
    `;
    return;
  }

  container.innerHTML = `
    <div class="products-grid">
      ${filteredProducts.map(product => `
        <div class="product-item" data-category="${product.category}">
          <img src="${product.image}" alt="${product.name}" 
               onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMyMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMWExYTFhIi8+Cjx0ZXh0IHg9IjE2MCIgeT0iMTAwIiBmaWxsPSIjNjY2NjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSIgZm9udC1mYW1pbHk9InN5c3RlbS11aSIgZm9udC1zaXplPSIxNHB4Ij5JbWFnZW0gTsOjbyBFbmNvbnRyYWRhPC90ZXh0Pgo8L3N2Zz4='">
          <h3>${product.name}</h3>
          <p>${product.description}</p>
          <div class="price">R$ ${product.price.toFixed(2).replace('.', ',')}</div>
          <button onclick="addToCart('${product.name}', ${product.price})">
            Adicionar ao Carrinho
          </button>
        </div>
      `).join('')}
    </div>
  `;
}

// Fun√ß√£o para filtrar produtos
function filterProducts(category) {
  currentFilter = category;
  
  // Atualizar bot√µes ativos
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
  
  renderProducts();
}

// Fun√ß√£o para adicionar ao carrinho
function addToCart(name, price) {
  const existingItem = cart.find(item => item.name === name);
  
  if (existingItem) {
    existingItem.quantity++;
  } else {
    cart.push({ name, price, quantity: 1 });
  }
  
  updateCartDisplay();
  showSyncStatus('Item adicionado ao carrinho!', 'success');
}

// Fun√ß√£o para atualizar exibi√ß√£o do carrinho
function updateCartDisplay() {
  const cartItems = document.getElementById('cart-items');
  const cartTotal = document.getElementById('cart-total');
  
  if (cart.length === 0) {
    cartItems.innerHTML = '<div class="empty-cart">Carrinho vazio</div>';
    cartTotal.textContent = 'Total: R$ 0,00';
    return;
  }
  
  cartItems.innerHTML = cart.map(item => `
    <div class="cart-item">
      <span>${item.name} x${item.quantity}</span>
      <span>R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}</span>
    </div>
  `).join('');
  
  const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  cartTotal.textContent = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
}

// Fun√ß√£o para finalizar compra
function checkout() {
  if (cart.length === 0) {
    showSyncStatus('Carrinho vazio!', 'warning');
    return;
  }
  
  const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  const itemsList = cart.map(item => `${item.name} x${item.quantity}`).join(', ');
  
  if (confirm(`Finalizar compra?\n\nItens: ${itemsList}\nTotal: R$ ${total.toFixed(2).replace('.', ',')}`)) {
    cart = [];
    updateCartDisplay();
    showSyncStatus('Compra finalizada com sucesso!', 'success');
  }
}

// Fun√ß√£o para monitorar mudan√ßas no localStorage
function monitorLocalStorage() {
  window.addEventListener('storage', function(e) {
    if (e.key === 'nova_vibe_products') {
      loadProducts();
    }
  });
  
  // Verificar mudan√ßas a cada 2 segundos (para mudan√ßas na mesma aba)
  setInterval(() => {
    try {
      const savedProducts = localStorage.getItem('nova_vibe_products');
      if (savedProducts) {
        const newProducts = JSON.parse(savedProducts);
        if (JSON.stringify(newProducts) !== JSON.stringify(products)) {
          products = newProducts;
          renderProducts();
          showSyncStatus('Produtos atualizados!', 'success');
        }
      }
    } catch (error) {
      console.error('Erro ao verificar atualiza√ß√µes:', error);
    }
  }, 2000);
}

// Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', function() {
  loadProducts();
  updateCartDisplay();
  monitorLocalStorage();
});

// Remover item do carrinho (fun√ß√£o adicional)
function removeFromCart(name) {
  cart = cart.filter(item => item.name !== name);
  updateCartDisplay();
  showSyncStatus('Item removido do carrinho', 'warning');
}
</script>

</body>
</html>
